<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Products - Groceries website</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/product.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="header">
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <a href ="index.html"><img src="images/grocery11_preview_rev_1.png" alt="logo" width="150px"></a>
                </div>
                <nav>
                    <ul id="menuItems">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="account.html">Account</a></li>
                    </ul>
                </nav>
                <a href="cart.html"><img src="images/cart.png" alt="" width="30px" height="30px"></a>
                <img src="images/menu.png" alt="" class="menu-icon" onclick="menuToggle()">
            </div>
        </div>
    </div>
    <!----------------Single Product details---------------->
<div class="small-container single-product-details">
    <div class="row">
        <div class="col-2">
            <img src="images/grapes.jpeg" alt="" width="100%" id ="productImg">
            <div class="small-img-row">
                <div class="small-img-col">
                    <img src="images/grape11.jpeg" alt="" width="100%" class="smallImg">
                </div>
                <div class="small-img-col">
                    <img src="images/grape22.jpeg" alt="" width="100%" class="smallImg">
                </div>
                <div class="small-img-col">
                    <img src="images/grapes.jpeg" alt="" width="100%" class="smallImg">
                </div>
                <div class="small-img-col">
                    <img src="images/grape11.jpeg" alt="" width="100%" class="smallImg">
                </div>
            </div>
        </div>
        <div class="col-2">
            <p id="productname">Green Grapes</p>
            <h1>Grapes from Mitra Farm House</h1>
            <h4 id="productprice">$10.00</h4>
            <select name="" id="quantity">
                <option value="">Select Options</option>
                <option value="">100g</option>
                <option value="">250g</option>
                <option value="">500g</option>
                <option value="">750g</option>
                <option value="">1kg</option>
            </select>
            <input type="number" value="1">
            <a href="" class="btn" onclick="addtoCart()">Add to Cart</a>
            <h3>Product Details</h3>
            <br>
            <p>Sweet and honey taste Fresh Green Grapes are from the Mitra Farm House. Green grapes have a green coloured skin and a clear flesh with a sweet taste that makes a perfect snack or can be used in a fruit salad. </p>
        </div>
    </div>
</div>

<!-- Title -->
<div class="small-container">
    <div class="row row-2">
        <h2>Related Products</h2>
        <p>View More</p>
    </div>
</div>

    <div class="small-container">
        <div class="row">
            <div class="col-4">
                <img src="images/maggi.webp" alt="">
                <h4>Maggie(150g)</h4>
                <div class="rating">
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9734;</span>
                    <span>&#9734;</span>
                </div>
                <p>$10.00</p>
            </div>
            <div class="col-4">
                <img src="images/toordal.jpg" alt="">
                <h4>Toordal (50g)</h4>
                <div class="rating">
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9734;</span>
                </div>
                <p>$20.00</p>
            </div>
            <div class="col-4">
                <img src="images/lays.jpeg" alt="">
                <h4>Lays</h4>
                <div class="rating">
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9734;</span>
                </div>
                <p>$5.00</p>
            </div>
            <div class="col-4">
                <img src="images/tomato1.jpeg" alt="">
                <h4>Tomatoes(1kg)</h4>
                <div class="rating">
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9733;</span>
                    <span>&#9734;</span>
                    <span>&#9734;</span>
                </div>
                <p>$20.00</p>
            </div>
        </div>
    </div>
    <!-------------Footer-------------->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Download the App</h3>
                    <p>Download App for Android and iOS Mobile Phones.</p>
                    <div class="app-logo">
                        <img src="images/play-store.png" alt="">
                        <img src="images/app-store.png" alt="">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="images/grocery11_preview_rev_1.png" alt="">
                </div>
                <div class="footer-col-3">
                    <h3>Useful Links</h3>
                    <ul>
                        <li>Contact Us</li>
                        <li>Special Offers</li>
                        <li>Return Policy</li>
                        <li>About Us</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Follow Us!</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                        <li>Twitter</li>
                    </ul>
                </div>
            </div>
            <hr>
            <p class="copyright"> &copy; Copyright 2022 - Grocery</p>
        </div>
    </div>
    <!-------------Js for toggle menu-------------->
    <script>
        var menuItems = document.getElementById("menuItems");
        menuItems.style.maxHeight = "0px";
        function menuToggle() {
            if (menuItems.style.maxHeight == "0px") {
                menuItems.style.maxHeight = "200px"
            }
            else {
                menuItems.style.maxHeight = "0px"
            }
        }
        // Database version.
        var version = 1;
        var datastore = null;
        // Open a connection to the datastore.
        var request = indexedDB.open('groceriesdb', version);

        // Handle datastore upgrades.
        request.onupgradeneeded = function(e) {
            var db = request.result;
            // Delete the old datastore.
            if (db.objectStoreNames.contains('carts')) {
                db.deleteObjectStore('carts');
            }
            // Create a new datastore.
            var store = db.createObjectStore('carts');
        };

        // Handle successful datastore access.
        request.onsuccess = function(e) {
            // Get a reference to the DB.
            datastore = e.target.result;
        };

        request.onerror = function(e) {
            console.log('Error opening database');
        };
        function addtoCart() {
            var productimage = document.getElementById("productImg").src;
            var quant = document.getElementById("quantity");
            var prodname = document.getElementById("productname");
            var prodprice = document.getElementById("productprice");

            var db = datastore;
            // Initiate a new transaction.
            var transaction = db.transaction(['carts'], 'readwrite');
            // Get the datastore.
            var objStore = transaction.objectStore('carts');
            
            // Create an object for the todo item.
            var item = {
                'productimage': productimage,
                'quantity': quant,
                'productname': prodname,
                'productprice': prodprice
            };
            // Create the datastore request.
            var request = objStore.put(item);

            request.onsuccess = function(e){
                console.log('Item added to cart');
            };

            request.onerror = function(e) {
                console.log('Error adding to cart');
            };

        }
    </script>
    <!-- JS for Products Images-->
    <script>
        var productImg = document.getElementById("productImg");
        var smallImg = document.getElementsByClassName("smallImg");
        smallImg[0].onclick = function(){
            productImg.src = smallImg[0].src;
        }
        smallImg[1].onclick = function(){
            productImg.src = smallImg[1].src;
        }
        smallImg[2].onclick = function(){
            productImg.src = smallImg[2].src;
        }
        smallImg[3].onclick = function(){
            productImg.src = smallImg[3].src;
        }
    </script>
</body>

</html>